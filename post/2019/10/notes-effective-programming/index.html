<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Hugo 0.59.1" />

<title>Notes on Effective Programming Practice - loikein&#39;s notes</title>
<meta property="og:title" content="Notes on Effective Programming Practice - loikein&#39;s notes">


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-143089736-1', 'auto');
  
  ga('send', 'pageview');
}
</script>


  


<link rel="icon" type="image/x-icon" href="/favicon.ico" />




<link href='//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css' rel='stylesheet' type='text/css' />


<link rel="stylesheet" href="/css/fonts.css" media="all">
<link rel="stylesheet" href="/css/main.css" media="all">
<link rel="stylesheet" href="/css/clumsy-toc.css" media="all">




  </head>
  <body>
    <div class="wrapper">
      <header class="header">
        <nav class="nav">
  <a href="/post/" class="nav-logo">
    <img src="/images/loikein-logo.png"
         width="50"
         height="50"
         alt="Logo">
  </a>
  <ul class="nav-links">
    
    <li><a href="/post/">Posts</a></li>
    
    <li><a href="/tags/">Tags</a></li>
    
    <li><a href="/about/">About</a></li>
    
    <li><a href="https://github.com/loikein/loikein.github.io">GitHub</a></li>
    
  </ul>
</nav>
      </header>
<main class="content" role="main">
  <article class="article">
    
    <span class="article-duration">5 min read</span>
    
    <h1 class="article-title">Notes on Effective Programming Practice</h1>
    
    <span class="article-date">2019/10/15</span>
    
    
    
    <span class="tags">
    
    
    Tags:
    
    <a href='/tags/r'>R</a>
    
    <a href='/tags/programming'>Programming</a>
    
    <a href='/tags/python'>Python</a>
    
    
    
    </span>
    
    <div class="article-content">
      

<div id="TOC">
<ul>
<li><a href="#slides">Slides</a></li>
<li><a href="#example-process-of-a-project">Example Process of A Project</a></li>
<li><a href="#shell">Shell</a><ul>
<li><a href="#reference">Reference</a></li>
<li><a href="#basics">Basics</a></li>
<li><a href="#pipeline">Pipeline</a></li>
</ul></li>
<li><a href="#tex">TeX</a></li>
<li><a href="#git">Git</a><ul>
<li><a href="#reference-1">Reference</a></li>
<li><a href="#basics-1">Basics</a></li>
<li><a href="#escape-vim">Escape Vim</a></li>
<li><a href="#late-.gitignore">Late <code>.gitignore</code></a></li>
<li><a href="#multiple-branches">Multiple Branches</a></li>
<li><a href="#tagging">Tagging</a></li>
<li><a href="#collaboration">Collaboration</a></li>
</ul></li>
<li><a href="#anaconda">(Ana)Conda</a><ul>
<li><a href="#reference-2">Reference</a></li>
<li><a href="#setup-for-zsh">Setup for Zsh</a></li>
<li><a href="#create-delete-environment">Create &amp; Delete Environment</a></li>
<li><a href="#kernels">Kernels</a></li>
<li><a href="#use-sublime-with-sendcode">Use Sublime with SendCode</a></li>
</ul></li>
<li><a href="#python">Python</a></li>
<li><a href="#waf">Waf</a><ul>
<li><a href="#reference-3">Reference</a></li>
<li><a href="#config">Config</a></li>
<li><a href="#build">Build</a></li>
<li><a href="#miscellaneous">Miscellaneous</a></li>
</ul></li>
</ul>
</div>

<p>Note: I use macOS Catalina with Zsh terminal (Oh-My-Zsh), and Sublime Text 3.<br />
Please use Google to tailor your own version.</p>
<div id="slides" class="section level2">
<h2>Slides</h2>
<ul>
<li><a href="https://www.wiwi.uni-bonn.de/gaudecker/prog_econ_slides.html">Effective programming practices for economists: Slides — Hans-Martin von Gaudecker</a></li>
<li><a href="https://econ-project-templates.readthedocs.io/en/latest/index.html">Templates for Reproducible Research Projects in Economics — Tutorial: Templates for reproducible research projects</a></li>
<li><a href="https://www.dropbox.com/sh/0rk6k43bx2xqme2/AACLJFsQ9uG2_pUTR6JMk39Ga?dl=0">Dropbox - prog-econ-log</a></li>
</ul>
</div>
<div id="example-process-of-a-project" class="section level2">
<h2>Example Process of A Project</h2>
<pre class="sh"><code>#### set up ####

# clone
$ git clone https://github.com/path-to-your-repo

# creat an environment from an environment.yml file
$ conda env create -f environment.yml

$ conda activate exercise_1

$ python waf.py configure

$ subl .gitignore

#### do the following everytime ####

# after some changes to the files

$ python waf.py build

$ git add --all
$ git commit -m &quot;Some meaningful messages&quot;

$ git push</code></pre>
</div>
<div id="shell" class="section level2">
<h2>Shell</h2>
<div id="reference" class="section level3">
<h3>Reference</h3>
<p>TBA</p>
</div>
<div id="basics" class="section level3">
<h3>Basics</h3>
<pre class="sh"><code>$ who
# Loikein console  Oct 13 18:28
# Loikein ttys000  Oct 15 08:49

$ whoami
# Loikein

$ who am i
# Loikein ttys000  Oct 15 08:49</code></pre>
<pre class="sh"><code>$ alias                         # show all alias commands

$ ls                            # list
$ ls -lh                        # list in long format
$ ls -lha                       # list all files in long format

$ pwd                           # print working directory

$ cd                            # change directory
$ mkdir                         # make directory (new folder)
$ mv                            # move (change name of directory)
$ rm -r                         # remove directory

$ man                           # manual
$ [command] -h                  # help</code></pre>
<pre class="sh"><code>$ subl something.txt            #sublime create or open

$ cp something.txt nothing.txt  #copy

$ ls *.*                        # any file
$ ls *thing*                    # any file include &quot;thing&quot;
$ ls some?hing.txt              # one unknown character

$ rm nothing.txt                # delete</code></pre>
<pre class="sh"><code>$ cat something.txt             # print 
$ head -2 something.txt         # print first 2 lines
$ tail -3 something.txt         # print last 3 lines

$ less something.txt            # view (type &quot;q&quot; to quit)
$ more something.txt            # view &amp; print</code></pre>
</div>
<div id="pipeline" class="section level3">
<h3>Pipeline</h3>
<p>TBA</p>
</div>
</div>
<div id="tex" class="section level2">
<h2>TeX</h2>
<p>TBA</p>
</div>
<div id="git" class="section level2">
<h2>Git</h2>
<div id="reference-1" class="section level3">
<h3>Reference</h3>
<ul>
<li><a href="https://git-scm.com/book/zh/v2/">Git - Book (Chinese)</a></li>
<li><a href="https://www.bootcss.com/p/git-guide/">git 使用简易指南</a><br />
</li>
<li><a href="https://juejin.im/post/5bd2debfe51d457abc710b57">规范你的 commit message 并且根据 commit 自动生成 CHANGELOG.md</a></li>
<li><a href="http://www.ruanyifeng.com/blog/2014/06/git_remote.html">Git远程操作详解 - 阮一峰的网络日志</a></li>
</ul>
</div>
<div id="basics-1" class="section level3">
<h3>Basics</h3>
<pre class="sh"><code>$ git config --global core.editor &quot;subl -n -w&quot;

$ git config --global user.name &quot;me&quot;
$ git config --global user.email &quot;me@me.com&quot;

$ git config color.ui true</code></pre>
<pre class="sh"><code>$ git status

$ git init
$ git add something.txt
$ git add -all

$ git reset                     # ignore all changes

$ git commit -m &quot;New ideas for PS1&quot;
$ git commit -a -m &quot;Add a line&quot;

$ git commit --amend            # change commit message

$ git log</code></pre>
<pre class="sh"><code>$ git diff                      # working tree vs index file
$ git diff --cached             # index file vs commit

$ git diff --color-words        # only show changed words

$ git log                       # commit history
$ git log --name-only           # commit history w/ file names</code></pre>
</div>
<div id="escape-vim" class="section level3">
<h3>Escape Vim</h3>
<ul>
<li>No save: press <code>Esc</code> and press <code>:q</code></li>
<li>Save: press <code>Esc</code> and press <code>:wq</code></li>
</ul>
</div>
<div id="late-.gitignore" class="section level3">
<h3>Late <code>.gitignore</code></h3>
<p>Ref: <a href="https://stackoverflow.com/a/1139797">Ignore files that have already been committed to a Git repository</a></p>
<pre class="sh"><code>$ git commit -m &quot;add/change .gitignore&quot;

$ git rm -r --cached .
$ git add .

$ git commit -m &quot;.gitignore is now working&quot;</code></pre>
</div>
<div id="multiple-branches" class="section level3">
<h3>Multiple Branches</h3>
<pre class="sh"><code>#### commit everything first! ####

$ git branch great-new-branch

$ git branch
# * master
#   great-new-branch

$ git checkout great-new-branch
# Switched to branch &#39;great-new-branch&#39;

$ git branch
#   master
# * great-new-branch

#### some changes to the files ####

$ git checkout master

$ git merge great-new-branch
# CONFLICT (follow the message)</code></pre>
</div>
<div id="tagging" class="section level3">
<h3>Tagging</h3>
<pre class="sh"><code>$ git checkout -b (HASH10)

$ git tag submittable_version -m &quot;In case everything else fails&quot;

$ git checkout master

$ git tag
# submittable_version</code></pre>
</div>
<div id="collaboration" class="section level3">
<h3>Collaboration</h3>
<pre class="sh"><code>#### after some changes by others ####
$ git pull                              # = fetch + merge
# CONFLICT (content): Merge conflict</code></pre>
</div>
</div>
<div id="anaconda" class="section level2">
<h2>(Ana)Conda</h2>
<div id="reference-2" class="section level3">
<h3>Reference</h3>
<ul>
<li><a href="https://stackoverflow.com/a/57974390">How do I prevent Conda from activating the base environment by default?</a></li>
<li><a href="https://medium.com/python4u/%E7%94%A8conda%E5%BB%BA%E7%AB%8B%E5%8F%8A%E7%AE%A1%E7%90%86python%E8%99%9B%E6%93%AC%E7%92%B0%E5%A2%83-b61fd2a76566">用conda建立及管理python虛擬環境 - Python4U - Medium</a></li>
<li><a href="https://docs.conda.io/projects/conda/en/latest/user-guide/tasks/manage-environments.html">Managing environments — conda documentation</a></li>
</ul>
</div>
<div id="setup-for-zsh" class="section level3">
<h3>Setup for Zsh</h3>
<pre class="sh"><code>$ conda init zsh

$ echo -n &#39;CONDA_AUTO_ACTIVATE_BASE=false&#39; &gt;&gt; ~/.zshrc
$ source ~/.zshrc

$ conda info
$ conda env list
# or
$ conda info --envs

$ conda udate --all</code></pre>
</div>
<div id="create-delete-environment" class="section level3">
<h3>Create &amp; Delete Environment</h3>
<pre class="sh"><code>#### do not git before activate for the first time! ####

# create new environment with a name
$ conda create --name someEnv
# install packages to any environment
$ conda install -n someEnv numpy

$ conda activate                        # activate base
$ conda activate someEnv                # activate someEnv
$ git init

$ conda deactivate                      # deactivate someEnv
$ conda deactivate                      # deactivate base

$ conda remove -n someEnv --all
# or
$ conda env remove -n someEnv</code></pre>
</div>
<div id="kernels" class="section level3">
<h3>Kernels</h3>
<p>ref:</p>
<ul>
<li><a href="https://stackoverflow.com/a/44072803">How do I add python3 kernel to jupyter (IPython)</a></li>
<li><a href="https://jupyter-client.readthedocs.io/en/latest/kernels.html">Making kernels for Jupyter — jupyter_client documentation</a></li>
</ul>
<pre class="sh"><code>$ conda activate                        # activate base

$ jupyter kernelspec lists
# Available kernels:
#   python3    /usr/local/anaconda3/share/jupyter/kernels/python3
#### note: this is iPython kernel ####

$ jupyter --paths
# config:
#    …
# data:
#    …
# runtime:
#    …</code></pre>
<!--
### Hermes with Sublime Text 3

Find the `kernel.json` in path of kernel, see as from `jupyter kernelspec lists`.  
Mine looks like this:  
Paste everything into Hermes: Connect Kernel

```JSON
{
 "argv": [
  "/usr/local/anaconda3/bin/python",
  "-m",
  "ipykernel_launcher",
  "-f",
  "{connection_file}"
 ],
 "display_name": "Python 3",
 "language": "python"
}
```
-->
</div>
<div id="use-sublime-with-sendcode" class="section level3">
<h3>Use Sublime with SendCode</h3>
<ol style="list-style-type: decimal">
<li>Press <code>command + shift + P</code> to start Command Palette</li>
<li>Install <a href="https://github.com/randy3k/SendCode">randy3k/SendCode</a> via Package Control</li>
<li>Choose <code>SendCode: Choose Program</code> (e.g. terminal)</li>
<li><code>$ conda activate</code></li>
<li><code>$ ipython</code></li>
<li>Press <code>command + return</code> to run the selected line(s)</li>
</ol>
</div>
</div>
<div id="python" class="section level2">
<h2>Python</h2>
<p>see <a href="../../06/intro-python/#notes-from-effective-programming">Notes on Python</a></p>
</div>
<div id="waf" class="section level2">
<h2>Waf</h2>
<ul>
<li>Like a master <code>.do</code> file</li>
<li>Declarative programming</li>
</ul>
<div id="reference-3" class="section level3">
<h3>Reference</h3>
<ul>
<li><a href="https://waf.io/apidocs/tutorial.html">Waf tutorial — Waf 2.0.18 documentation</a></li>
<li><a href="https://blog.csdn.net/u010312436/article/details/81093847">学习笔记：waf帮助构建及编译系统 - fanchenxinok的专栏 - CSDN博客</a></li>
</ul>
</div>
<div id="config" class="section level3">
<h3>Config</h3>
<pre class="sh"><code>$ subl wscript</code></pre>
<pre class="python"><code>def configure(ctx):
    ctx.env.PYTHONPATH = os.getcwd()
    # Need shell-escape for converting eps to pdf on the fly, necessary e.g. for Stata # Vector graphics output in batch mode.
    ctx.env.PDFLATEXFLAGS = [&quot;-halt-on-error&quot;]
    ctx.load(&quot;run_py_script&quot;)
    ctx.load(&quot;write_project_headers&quot;)
    ctx.load(&quot;tex&quot;)
    print(&quot;configure!&quot;)</code></pre>
<pre class="sh"><code>$ python waf.py configure
# configure!</code></pre>
</div>
<div id="build" class="section level3">
<h3>Build</h3>
<pre class="sh"><code>$ cd source
$ subl wscript</code></pre>
<pre class="python"><code>def build(ctx):
    ctx(
        features=&quot;run_py_script&quot;,
        source=&quot;production_standalone.py&quot;,
        target=[
            ctx.path_to(ctx, &quot;OUT_ANALYSIS&quot;, &quot;standalone&quot;, &quot;cobb_douglas_result.json&quot;),
            ctx.path_to(ctx, &quot;OUT_ANALYSIS&quot;, &quot;standalone&quot;, &quot;ces_result.json&quot;),
            ctx.path_to(ctx, &quot;OUT_ANALYSIS&quot;, &quot;standalone&quot;, &quot;robust_ces_result.json&quot;),
        ],
        name=&quot;production_standalone&quot;,)
    print(&quot;build!&quot;)</code></pre>
<pre class="sh"><code>$ cd ..
$ python waf.py build
# build!</code></pre>
</div>
<div id="miscellaneous" class="section level3">
<h3>Miscellaneous</h3>
<pre class="sh"><code># clean all build files and compile from zero
$ python waf.py disctlean
$ python waf.py build

# build step-by-step
$ python waf.py -j1</code></pre>
<!-- 
## License

- You are free
    – to copy, distribute and transmit the work
    – to adapt the work
- Under the following conditions
    - You must attribute the work in the manner specified by the author or licensor (but not in any way that suggests that they endorse you or your use of the work).
- With the understanding that
    - Any of the above condition scan be waived if you get permission from the copyright holder.
    - Where the work or any of its elements in the public domain under applicable law, that status is in no way affected by the license.
- In no way are any of the following rights affected by the license
    – Your fair dealing or fair use rights, or other applicable copy-right exceptions and limitations
    – The author's moral rights
    – Rights other persons may have either in the work itself or in how the work is used, such as publicity or privacy rights.
- Notice For any reuse or distribution, you must make clear to others the license terms of this work.
 -->
</div>
</div>

    </div>
  </article>
  
<section id="comments">
  <div id="disqus_thread"></div>
  <script>
  (function() { 
  var d = document, s = d.createElement('script');
  s.src = 'https://loikein-github.disqus.com/embed.js';
  s.setAttribute('data-timestamp', +new Date());
  (d.head || d.body).appendChild(s);
  })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</section>

</main>
      <footer class="footer">
        <ul class="footer-links">
          <li>
            <a href="/index.xml" type="application/rss+xml" target="_blank">RSS feed</a>
          </li>

          <li>By loikein with love</li>
        </ul>
      </footer>
    </div>
    
    <script src="https://hypothes.is/embed.js" async></script>
    



<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>



<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/r.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/yaml.min.js"></script>
<script>hljs.configure({languages: []}); hljs.initHighlightingOnLoad();</script>


    
<script src="/js/math-code.js"></script>
<script async src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"></script>

    
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-143089736-1', 'auto');
	
	ga('send', 'pageview');
}
</script>

  </body>
</html>